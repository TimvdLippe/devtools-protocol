<link rel="import" href="../../bower_components/polymer/polymer.html"><link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../../bower_components/iron-overlay-behavior/iron-overlay-behavior.html"><link rel="import" href="../../bower_components/iron-menu-behavior/iron-menu-behavior.html"><link rel="import" href="../../bower_components/iron-list/iron-list.html"><link rel="import" href="../../bower_components/iron-icons/image-icons.html"><link rel="import" href="../cr-html-echo/cr-html-echo.html"><dom-module id="cr-search-menu"><template><style>:host {
        --border-width: 1px;
        height: calc(100vh - 2 * var(--main-content-padding) - var(--header-height) - 2 * var(--border-width));
        display: flex;
        border: var(--border-width) solid #ccc;
        box-shadow: 0 1px 3px 2px rgba(0, 0, 0, 0.15);
        background-color: white;
      }
      [hidden] {
        display: none !important;
      }
      iron-list {
        padding: 11px 0;
        width: 100%;
        flex: 1;
      }
      .match-info {
        @apply --layout-vertical;
        flex: 1 auto;
      }
      .search-match {
        padding: 8px 16px;
        text-decoration: none;
        font-weight: 200;
        @apply --layout-horizontal;
        width: 100%;
        cursor: pointer;
      }
      iron-icon {
        width: 36px;
        height: 36px;
        padding-right: 10px;
        fill: #4e4e4e;
        -ms-flex-shrink: 0;
        -webkit-flex-shrink: 0;
        flex-shrink: 0;
      }
      .match-label {
        @apply --layout-horizontal;
      }
      .match-description {
        @apply --layout-flex-auto;
        margin-top: 3px;
      }
      .label {
        @apply --layout-flex-auto;
        font-size: 18px;
      }
      a {
        text-decoration: none;
        color: #383838;
      }
      .domain-tag {
        @apply --layout-flex-none;
        text-align: right;
      }
      .label .type, .domain-label {
        color: #3A3A3A;
        font-size: 14px;
      }
      .search-match:hover, .search-match--active {
        background-color: #E8F0FF;
      }
      .empty-state-message {
        margin: 0;
        padding: 35px;
        text-align: center;
      }</style><slot name="header"></slot><p class="empty-state-message" hidden$="[[!empty_]]">No matches. Try another search.</p><iron-list id="ironList" items="[[renderItems]]" as="match" hidden$="[[empty_]]"><template><a href$="[[computeMatchHref_(match)]]" class$="search-match [[highlightedClass(match.selected)]]" role="menuitem" on-click="activateItem_"><iron-icon icon="[[match.icon]]"></iron-icon><div class="match-info"><div class="match-label"><div class="label"><span>[[match.label]]</span> <span class="type">[[match.typeLabel]]</span></div><div class="domain-tag" hidden$="[[isDomainType_(match.type)]]"><span class="domain-label">Domain</span> <span>[[match.domain]]</span></div></div><div class="match-description"><cr-html-echo html="[[match.description]]"></cr-html-echo></div></div></a></template></iron-list><slot name="footer"></slot></template></dom-module><script>(function(){Polymer({is:'cr-search-menu',properties:{keywordsModel:{type:Object},searchString:{type:String,value:''},renderItems:{type:Array,readOnly:!0,value:[],observer:'handleRenderItemsChange_'},highlightedResultIdx:{type:Number,value:-1},empty_:{type:Boolean,empty:!1}},observers:['renderItems_(keywordsModel, searchString)'],highlightedClass:function(a){return a?'search-match--active':''},highlightNextResult:function(){this.highlightedResultIdx>=this.renderItems.length||(this.set('renderItems.'+this.highlightedResultIdx+'.selected',!1),this.highlightedResultIdx++,this.set('renderItems.'+this.highlightedResultIdx+'.selected',!0),this.showHighlightedResult_())},highlightPreviousResult:function(){0>=this.highlightedResultIdx||(this.set('renderItems.'+this.highlightedResultIdx+'.selected',!1),this.highlightedResultIdx--,this.set('renderItems.'+this.highlightedResultIdx+'.selected',!0),this.showHighlightedResult_())},showHighlightedResult_:function(){var a=this.$$('.search-match--active');a&&(a.scrollIntoViewIfNeeded?a.scrollIntoViewIfNeeded(!1):a.scrollIntoView&&a.scrollIntoView(!1))},chooseHighlightedResult:function(){var a=this.renderItems[this.highlightedResultIdx];a&&(a.href&&(history.pushState({},'',a.href),this.fire('location-changed')),this.activateItem_())},activateItem_:function(){this.fire('item-activate')},renderItems_:function(a,b){this.highlightedResultIdx=-1;var c=[];if(a){var d=a.getMatches(b.toLowerCase());d.forEach(function(a){a.pageReferences.forEach(function(b){var d=Object.create(b);d.typeLabel=this.TypeLabel[b.type],d.label=a.keyword,d.icon=this.TypeIcon[b.type],d.domainHref='/devtools-protocol/'+b.domainHref,d.href=b.href?d.domainHref+b.href:d.domainHref,c.push(d)},this)},this)}this.debounce('_iron-rerender',function(){this._setRenderItems(c)}.bind(this),50)},handleRenderItemsChange_:function(){this.empty_=!this.renderItems.length},computeMatchHref_:function(a){return this.isDomainType_(a.type)?a.domainHref:a.href},isDomainType_:function(a){return a===this.Type.DOMAIN},timeoutId_:null,Type:{DOMAIN:'0',EVENT:'1',PARAM:'2',TYPE:'3',METHOD:'4'},TypeLabel:{0:'Domain',1:'Event',2:'Parameter',3:'Type',4:'Method'},TypeIcon:{0:'',1:'image:wb-iridescent',2:'icons:more-horiz',3:'icons:code',4:'icons:apps'}})})();</script>