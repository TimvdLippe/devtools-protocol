/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */'use strict';const gulp=require('gulp'),sourcemaps=require('gulp-sourcemaps'),buffer=require('vinyl-buffer'),rename=require('gulp-rename'),rollup=require('rollup-stream'),source=require('vinyl-source-stream'),del=require('del'),runseq=require('run-sequence'),closure=require('google-closure-compiler').gulp(),babel=require('rollup-plugin-babel');function debugify(a,b,c){b||(b=a);const d={entry:`./entrypoints/${a}-index.js`,format:'iife',moduleName:'webcomponentsjs'};return Object.assign(d,c),rollup(d).pipe(source(`${a}-index.js`),'entrypoints').pipe(rename(b+'.js')).pipe(gulp.dest('./'))}function closurify(a,b){b||(b=a);const c={new_type_inf:!0,compilation_level:'ADVANCED',language_in:'ES6_STRICT',language_out:'ES5_STRICT',isolation_mode:'IIFE',assume_function_wrapper:!0,js_output_file:`${b}.js`,warning_level:'VERBOSE',rewrite_polyfills:!1,externs:['externs/webcomponents.js','node_modules/@webcomponents/custom-elements/externs/custom-elements.js','node_modules/@webcomponents/html-imports/externs/html-imports.js','node_modules/@webcomponents/shadycss/externs/shadycss-externs.js','node_modules/@webcomponents/shadydom/externs/shadydom.js']},d={entry:`entrypoints/${a}-index.js`,format:'iife',moduleName:'webcomponents',sourceMap:!0,context:'window'};return rollup(d).pipe(source(`${a}-index.js`,'entrypoints')).pipe(buffer()).pipe(sourcemaps.init({loadMaps:!0})).pipe(closure(c)).pipe(sourcemaps.write('.')).pipe(gulp.dest('.'))}gulp.task('debugify-hi',()=>debugify('webcomponents-hi')),gulp.task('debugify-hi-ce',()=>debugify('webcomponents-hi-ce')),gulp.task('debugify-hi-sd-ce',()=>debugify('webcomponents-hi-sd-ce')),gulp.task('debugify-hi-sd-ce-pf',()=>{return debugify('webcomponents-hi-sd-ce-pf','webcomponents-lite',{context:'window'})}),gulp.task('debugify-sd-ce',()=>debugify('webcomponents-sd-ce')),gulp.task('closurify-hi',()=>closurify('webcomponents-hi')),gulp.task('closurify-hi-ce',()=>closurify('webcomponents-hi-ce')),gulp.task('closurify-hi-sd-ce',()=>closurify('webcomponents-hi-sd-ce')),gulp.task('closurify-hi-sd-ce-pf',()=>closurify('webcomponents-hi-sd-ce-pf','webcomponents-lite')),gulp.task('closurify-sd-ce',()=>closurify('webcomponents-sd-ce'));function singleLicenseComment(){let a=!1;return(b)=>!a&&(a=/@license/.test(b))}const babelOptions={presets:'minify',shouldPrintComment:singleLicenseComment()};gulp.task('debugify-ce-es5-adapter',()=>debugify('custom-elements-es5-adapter','',{plugins:[babel(babelOptions)]})),gulp.task('default',['closure']),gulp.task('clean-builds',()=>del(['custom-elements-es5-adapter.js{,.map}','webcomponents*.js{,.map}','!webcomponents-loader.js'])),gulp.task('debug',(a)=>{runseq('clean-builds',['debugify-hi','debugify-hi-ce','debugify-hi-sd-ce','debugify-hi-sd-ce-pf','debugify-sd-ce','debugify-ce-es5-adapter'],a)}),gulp.task('closure',(a)=>{runseq('clean-builds',...['closurify-hi','closurify-hi-ce','closurify-hi-sd-ce','closurify-hi-sd-ce-pf','closurify-sd-ce','debugify-ce-es5-adapter'],a)});